# std::deque

## 一、头文件

`std::deque` 是标准库中的组件，使用时需要包含相关头文件。deque 是一个类模板，在实例化的时候需要指定模板参数。

```c++
#include <deque>
```

## 二、结构

容器 deque 和 vector 非常相似，也是采用动态数组来管理元素，**提供随机存取**，有着和 vector 几乎一样的接口，不同的是 deque 的动态数组头尾都开放，因此可以在头尾都可以进行快速的安插和删除。

![img](.\Photo\deque_01.jpg)

为了支持这种能力，deque 通常为一组独立区块，第一区块朝某方向扩展，最后一区块朝另一方向扩展。

![img](.\Photo\deque_02.jpg)

## 三、和 vector 对比

### 1. 与 vector 区别

两端都能快速安插和删除元素。

存取元素时，deque 内部结构会多一个间接的过程，所以存取和迭代器的动作会稍微慢一些。

迭代器需要在不同的内存区块跳转，所以必须是特殊的智能型指针，非一般指针。

deque 不支持对容量和内存重分配时机的控制，除了头尾两端，在任何地方删除或者增加元素都会使 reference、pointers、iterators 失效。deque 的内存分配优于 vector，由其内部可知，deque 不必在内存重新分配时复制所有元素。

deque 的内存区块不再被使用时，会被释放。deque 的内存大小是可缩减的。

### 2. 与 vector 的共同点

在中段部分安插、移除元素的速度相对较慢，因为所有的元素都需要移动或者腾出填补空间。

迭代器属于 random access iterator（随机存取迭代器）。
